name: build

on:
  push:
    tags:
      - 'v*.*.*'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: prepare artifacts for packaging
        run: |
          mkdir -p .debpkg/usr/bin
          mkdir -p .debpkg/etc/systemd/system
          ls >> .debpkg/usr/bin/samplescript
          pwd >> .debpkg/usr/bin/samplescript
          chmod +x .debpkg/usr/bin/samplescript
      - uses: jiro4989/build-deb-action@v2
        with:
          package: solar
          package_root: solar_raspbian
          maintainer: Oli
          version: ${{ github.ref }} # refs/tags/v*.*.*
          arch: 'armel'
          depends: 'python3'
          desc: 'ladex10 service with relay control logic via rapsi GPIO pins'